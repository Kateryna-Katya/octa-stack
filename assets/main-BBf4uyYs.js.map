{"version":3,"file":"main-BBf4uyYs.js","sources":["../../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  console.log('Octa-Stack Script Loaded');\n\n  // 1. Инициализация иконок (Safe Mode)\n  try {\n      if (typeof lucide !== 'undefined') {\n          lucide.createIcons();\n      }\n  } catch (e) { console.error('Icons error:', e); }\n\n  // 2. Mobile Menu (Burger)\n  const burger = document.getElementById('burger');\n  const nav = document.getElementById('nav');\n\n  if (burger && nav) {\n      burger.addEventListener('click', () => {\n          burger.classList.toggle('active');\n          nav.classList.toggle('active');\n      });\n\n      document.querySelectorAll('.nav__link').forEach(link => {\n          link.addEventListener('click', () => {\n              burger.classList.remove('active');\n              nav.classList.remove('active');\n          });\n      });\n  }\n\n  // 3. Анимации (GSAP)\n  try {\n      if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {\n          gsap.registerPlugin(ScrollTrigger);\n\n          // Hero\n          const heroTl = gsap.timeline({ defaults: { ease: 'power3.out' } });\n          heroTl.from('.hero__content', { y: 30, opacity: 0, duration: 1, delay: 0.2 })\n                .from('.hero__visual', { x: 30, opacity: 0, duration: 1 }, '-=0.8');\n\n          // Sections\n          document.querySelectorAll('section:not(#hero)').forEach(sec => {\n              gsap.from(sec, {\n                  scrollTrigger: {\n                      trigger: sec,\n                      start: 'top 85%',\n                      toggleActions: 'play none none reverse'\n                  },\n                  y: 40,\n                  opacity: 0,\n                  duration: 0.8\n              });\n          });\n      }\n  } catch (e) { console.warn('Animations skipped'); }\n\n  // ==========================================\n  // 4. ФОРМА (СТРОГАЯ ВАЛИДАЦИЯ)\n  // ==========================================\n  const form = document.getElementById('leadForm');\n\n  if (form) {\n      // --- A. Блокировка букв в телефоне ---\n      const phoneInput = document.getElementById('phone');\n      if (phoneInput) {\n          phoneInput.addEventListener('input', function(e) {\n              // Заменяем всё, что НЕ цифра, плюс, минус, скобка или пробел, на пустоту\n              this.value = this.value.replace(/[^\\d\\+\\-\\(\\)\\s]/g, '');\n          });\n      }\n\n      // --- B. Капча ---\n      const captchaLabel = document.getElementById('captchaLabel');\n      const captchaInput = document.getElementById('captchaInput');\n      const num1 = Math.floor(Math.random() * 5) + 1;\n      const num2 = Math.floor(Math.random() * 5) + 1;\n      const correctAnswer = num1 + num2;\n\n      if (captchaLabel) captchaLabel.textContent = `Сколько будет ${num1} + ${num2}?`;\n\n      // --- C. Обработчик отправки ---\n      form.addEventListener('submit', function(e) {\n          e.preventDefault();\n          let isValid = true;\n\n          // Сброс ошибок\n          document.querySelectorAll('.form-group, .form-checkbox').forEach(el => el.classList.remove('error'));\n\n          // 1. Проверка текстовых полей\n          const inputs = form.querySelectorAll('input[type=\"text\"], input[type=\"email\"], input[type=\"tel\"]');\n          inputs.forEach(input => {\n              const group = input.closest('.form-group');\n              const val = input.value.trim();\n\n              if (!val) {\n                  group.classList.add('error');\n                  isValid = false;\n              }\n              else if (input.type === 'email' && !val.includes('@')) {\n                  group.classList.add('error'); // Простая проверка email\n                  isValid = false;\n              }\n              else if (input.type === 'tel' && val.length < 7) {\n                  group.classList.add('error'); // Слишком короткий номер\n                  isValid = false;\n              }\n          });\n\n          // 2. Проверка ЧЕКБОКСА (Обязательно)\n          const checkbox = document.getElementById('consent');\n          if (checkbox && !checkbox.checked) {\n              // Ищем родителя .form-checkbox и красим его\n              checkbox.closest('.form-checkbox').classList.add('error');\n              // Можно добавить красную рамку через CSS для .error\n              checkbox.closest('.form-checkbox').style.color = 'var(--color-secondary)';\n              isValid = false;\n          } else if (checkbox) {\n              checkbox.closest('.form-checkbox').style.color = ''; // Сброс цвета\n          }\n\n          // 3. Проверка Капчи\n          if (captchaInput) {\n              if (parseInt(captchaInput.value) !== correctAnswer) {\n                  captchaInput.closest('.form-group').classList.add('error');\n                  isValid = false;\n              }\n          }\n\n          // ИТОГ\n          if (isValid) {\n              const btn = form.querySelector('button[type=\"submit\"]');\n              btn.textContent = 'Отправка...';\n              btn.disabled = true;\n\n              // Имитация отправки\n              setTimeout(() => {\n                  form.style.display = 'none';\n                  const successMsg = document.getElementById('formSuccess');\n                  if (successMsg) {\n                      successMsg.style.display = 'block';\n                      if(typeof gsap !== 'undefined') gsap.from(successMsg, {y: 20, opacity: 0});\n                  }\n              }, 1000);\n          } else {\n              // Вибрация формы при ошибке\n              if(typeof gsap !== 'undefined') {\n                  gsap.to(form, {x: [-5, 5, -5, 5, 0], duration: 0.3});\n              }\n          }\n      });\n\n      // Убираем ошибки при вводе\n      form.querySelectorAll('input').forEach(input => {\n          input.addEventListener('input', function() {\n              if (this.type === 'checkbox') {\n                   this.closest('.form-checkbox').classList.remove('error');\n                   this.closest('.form-checkbox').style.color = '';\n              } else {\n                   this.closest('.form-group').classList.remove('error');\n              }\n          });\n      });\n  }\n\n  // 5. Cookie Popup\n  const cookiePopup = document.getElementById('cookiePopup');\n  const acceptBtn = document.getElementById('acceptCookies');\n  if (cookiePopup && !localStorage.getItem('cookiesAccepted')) {\n      setTimeout(() => { cookiePopup.style.display = 'flex'; }, 2000);\n      if (acceptBtn) {\n          acceptBtn.addEventListener('click', () => {\n              localStorage.setItem('cookiesAccepted', 'true');\n              cookiePopup.style.display = 'none';\n          });\n      }\n  }\n\n  // 6. Year Update\n  const yearSpan = document.getElementById('year');\n  if (yearSpan) yearSpan.textContent = new Date().getFullYear();\n});"],"names":["e","burger","nav","link","sec","form","phoneInput","captchaLabel","captchaInput","num1","num2","correctAnswer","isValid","el","input","group","val","checkbox","btn","successMsg","cookiePopup","acceptBtn","yearSpan"],"mappings":"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"}